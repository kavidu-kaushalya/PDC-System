<UserControl x:Class="PDC_System.Paysheets.PaysheetWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:PDC_System.Paysheets"
             xmlns:conv="clr-namespace:PDC_System.Paysheets.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <conv:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>
    </UserControl.Resources>

    <StackPanel>
        <StackPanel>
            <Button Style="{DynamicResource ActionButton}" Width="150" Click="CreatePaysheet_Click"  Content="➕ Create Paysheet"></Button>

        </StackPanel>

        <StackPanel HorizontalAlignment="Center">
            <DataGrid x:Name="PaysheetGrid" Height="300"
AlternatingRowBackground="#f0f0f0"
SnapsToDevicePixels="True"

AutoGenerateColumns="False"
CanUserResizeColumns="False"
CellStyle="{StaticResource DataGridCellStyle}"
Style="{StaticResource DataGridStyle}"
ColumnHeaderStyle="{StaticResource DataGridHeaderStyle}"
RowStyle="{StaticResource DataGridRowStyle}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Employee ID" Binding="{Binding EmployeeId}" ElementStyle="{DynamicResource DataGridColumnsStyle}" />
                    <DataGridTextColumn Header="Month" Binding="{Binding Month}" ElementStyle="{DynamicResource DataGridColumnsStyle}" />
                    <DataGridTextColumn Header="Paysheet ID" Binding="{Binding PaysheetId }" ElementStyle="{DynamicResource DataGridColumnsStyle}" />

                    <DataGridTextColumn Header="Name" Binding="{Binding EmployeeName}"  ElementStyle="{DynamicResource DataGridColumnsStyle}"/>
                    <DataGridTextColumn Header="Salary" Binding="{Binding Salary}"  ElementStyle="{DynamicResource DataGridColumnsStyle}"/>
                    <DataGridTextColumn Header="Earnings" Binding="{Binding TotalEarnings}" ElementStyle="{DynamicResource DataGridColumnsStyle}" />
                    <DataGridTextColumn Header="Deductions" Binding="{Binding TotalDeductions}" ElementStyle="{DynamicResource DataGridColumnsStyle}" />
                    <DataGridTemplateColumn Header="Actions">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button Style="{DynamicResource ActionButton}" Content="Edit" Click="EditPaysheet_Click" Tag="{Binding}" Margin="2"/>
                                    <Button Style="{DynamicResource DeleteActionButton}" Content="🚫 Delete" Click="DeletePaysheet_Click" Tag="{Binding}" Margin="2"/>

                                    <Button Content="View"
                                            Style="{DynamicResource ActionButton}"
        Tag="{Binding PDFPath}"
        Click="OpenPDF_Click"
        Visibility="{Binding PDFPath, Converter={StaticResource StringToVisibilityConverter}}"/>


                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

        </StackPanel>
        
    </StackPanel>
</UserControl>
